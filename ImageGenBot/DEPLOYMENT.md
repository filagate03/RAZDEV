# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Deployment

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Deployment –Ω–∞ Replit

–í–∞—à –±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ Replit Cloud Run (VM).

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

Deployment –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —Ñ–∞–π–ª–µ `.replit`:

```toml
[deployment]
deploymentTarget = "autoscale"
run = ["python3", "main.py"]
build = ["pip", "install", "-r", "requirements.txt"]
```

**–í–∞–∂–Ω–æ:**
- `build` - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ requirements.txt –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- `run` - –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ build
- **Autoscale deployment** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è webhook-based –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### Health Checks

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç –¥–≤–∞ endpoint –¥–ª—è health checks:

- **`/`** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞)
- **`/health`** - Health check endpoint (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "OK")

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –°—Ä–µ–¥–Ω–∏–π response time: 1-3ms
- –ë–µ–∑ —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- Endpoints –æ—Ç–≤–µ—á–∞—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –¥–∞–∂–µ –µ—Å–ª–∏ –ë–î –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤–∞

### –ö–∞–∫ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å

1. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã** –≤ Replit Secrets:
   - `BOT_TOKEN`
   - `IMAGE_API_TOKEN`
   - `IMAGE_API_URL`
   - `CRYPTO_BOT_TOKEN`
   - `WEBHOOK_SECRET`
   - `ADMINS`

2. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Deploy"** –≤ Replit UI

3. **–í—ã–±–µ—Ä–∏—Ç–µ deployment target**: Autoscale (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

4. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ** –ø–æ–∫–∞ deployment –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:

1. Health check —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   curl https://your-deployment-url.replit.app/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `OK`

2. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   curl https://your-deployment-url.replit.app/
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `ü§ñ Telegram AI Image Generation Bot is running`

3. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

### Troubleshooting

#### Deployment –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç health check

**–ü—Ä–æ–±–ª–µ–º–∞**: Deployment –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π health check timeout

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `PORT`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `/` –∏ `/health` endpoints –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

#### Webhook –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ "REPLIT_DEV_DOMAIN not found"

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `REPLIT_DEV_DOMAIN` –¥–æ—Å—Ç—É–ø–Ω–∞
2. –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `USE_WEBHOOK=False` –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è webhook —Ä–µ–∂–∏–º–∞

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ "Database initialization error"

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `data/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ SQLite –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ deployment –æ–∫—Ä—É–∂–µ–Ω–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

Autoscale deployment –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ** - –æ—Ç 0 –¥–æ N –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ —Å–±–æ—è—Ö
- **Persistent storage** –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç** - –ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ deployment –≤—ã –º–æ–∂–µ—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å:

1. **–õ–æ–≥–∏** - –≤ Replit deployment console
2. **–ú–µ—Ç—Ä–∏–∫–∏** - –≤ Replit deployment dashboard
3. **Health** - —á–µ—Ä–µ–∑ `/health` endpoint

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Webhook URL** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ deployment
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
3. **–°–µ–∫—Ä–µ—Ç—ã** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑ Replit Secrets
4. **–ü–æ—Ä—Ç** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PORT`

### –°—Ç–æ–∏–º–æ—Å—Ç—å

VM deployment –Ω–∞ Replit –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã:
- –ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤
- –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã 24/7 —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ü–µ–Ω–∞—Ö: https://replit.com/pricing

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Replit Deployments Documentation](https://docs.replit.com/deployments)
- [Health Checks Best Practices](https://docs.replit.com/deployments/health-checks)
